# Grab the server class
# And then, figure out what to do with it

Server = require (require "path").resolve "#{__dirname}/Server"
if (require.main isnt module) then return module.exports = Server

# If we reached this point, then this server is running on its own, not included
# TODO Now, we only have to make it work with CLI arguments

cliparser = require "cliparser"
app       = cliparser.parse process.argv, "-v": "--version", "-h": "--help", "p", "--port", "-a", "--address"
app       = app.doubledash

root.package = require (require "path").resolve "#{__dirname}/../package"
if app.version then console.log root.package.version
else if app.help then require (require "path").resolve "#{__dirname}/Help"
